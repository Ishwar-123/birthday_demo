<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ Chirag àª²à«€àªŸà«€ Birthday! ğŸ‚</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles-confetti@2.12.0/tsparticles.confetti.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100vh;
        }

        /* Full Screen Container */
        .screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }

        .screen.active {
            opacity: 1;
            pointer-events: all;
            z-index: 100;
        }

        /* Screen Backgrounds */
        #screen1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        #screen2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        #screen3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        #screen4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        #screen5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        #screen6 { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
        #screen7 { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        #screen8 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        #screen9 { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        #screen10 { background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%); }

        .screen {
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Typography */
        .title {
            font-size: clamp(2rem, 8vw, 5rem);
            color: #fff;
            text-shadow: 0 5px 20px rgba(0,0,0,0.4);
            margin-bottom: 20px;
            font-weight: 900;
            text-align: center;
            line-height: 1.2;
        }

        .subtitle {
            font-size: clamp(1.2rem, 4vw, 2rem);
            color: rgba(255,255,255,0.95);
            text-shadow: 0 3px 10px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            text-align: center;
            font-weight: 600;
        }

        .text {
            font-size: clamp(1rem, 3vw, 1.5rem);
            color: rgba(255,255,255,0.9);
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            margin: 15px 0;
            text-align: center;
            line-height: 1.6;
        }

        .name-highlight {
            color: #ffd700;
            font-weight: 900;
            text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 40px rgba(255,215,0,0.6);
            display: inline-block;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 40px rgba(255,215,0,0.6); }
            50% { text-shadow: 0 0 30px rgba(255,215,0,1), 0 0 60px rgba(255,215,0,0.8); }
        }

        /* Buttons */
        .btn {
            padding: clamp(15px, 3vw, 25px) clamp(40px, 6vw, 70px);
            font-size: clamp(1.2rem, 3vw, 2rem);
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(10px);
            color: white;
            border: 3px solid rgba(255,255,255,0.5);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 900;
            text-transform: uppercase;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
            border-color: rgba(255,255,255,0.8);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 500px;
            height: 500px;
        }

        /* Emoji Animations */
        .emoji {
            font-size: clamp(5rem, 15vw, 12rem);
            display: inline-block;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.3));
            cursor: pointer;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* Countdown */
        .countdown {
            font-size: clamp(5rem, 20vw, 15rem);
            color: #fff;
            font-weight: 900;
            text-shadow: 0 10px 40px rgba(0,0,0,0.5);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* FIXED: Candles Container with Grid Layout */
        .candles-wrapper {
            width: 100%;
            max-width: 600px;
            margin: 30px auto;
            padding: 0 15px;
        }

        .candles-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            width: 100%;
            justify-items: center;
        }

        .candle {
            width: 100%;
            max-width: 70px;
            min-width: 45px;
            height: 120px;
            background: linear-gradient(to bottom, #ff6b6b, #ff8787);
            border-radius: 12px 12px 4px 4px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .candle:hover {
            transform: scale(1.08);
        }

        .candle.blown {
            background: linear-gradient(to bottom, #666, #999);
        }

        .flame {
            width: 24px;
            height: 36px;
            background: radial-gradient(circle, #ffed00 0%, #ff9500 100%);
            border-radius: 50% 50% 0 0;
            position: absolute;
            top: -28%;
            left: 50%;
            transform: translateX(-50%);
            animation: flicker 0.2s infinite alternate;
            box-shadow: 0 0 30px #ff9500, 0 0 50px rgba(255,149,0,0.5);
        }

        .candle.blown .flame {
            display: none;
        }

        @keyframes flicker {
            0% { transform: translateX(-50%) scaleY(1); }
            100% { transform: translateX(-50%) scaleY(1.15); }
        }

        /* Smoke Effect */
        .smoke {
            position: absolute;
            top: -25%;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 40px;
            background: rgba(150,150,150,0.6);
            border-radius: 50%;
            opacity: 0;
            filter: blur(3px);
        }

        .candle.blown .smoke {
            animation: smokeRise 2s ease-out forwards;
        }

        @keyframes smokeRise {
            0% {
                opacity: 0.8;
                transform: translateX(-50%) translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) translateY(-100px) scale(2);
            }
        }

        /* Wish Popup */
        .wish-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, rgba(255,107,107,0.95), rgba(255,202,87,0.95));
            backdrop-filter: blur(20px);
            padding: clamp(30px, 6vw, 60px);
            border-radius: 30px;
            border: 5px solid rgba(255,255,255,0.8);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            z-index: 1000;
            max-width: 90%;
            text-align: center;
        }

        .wish-popup.show {
            animation: popupAppear 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes popupAppear {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-180deg);
                opacity: 0;
            }
            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .wish-popup h2 {
            font-size: clamp(2rem, 6vw, 4rem);
            color: #fff;
            text-shadow: 0 5px 15px rgba(0,0,0,0.5);
            margin-bottom: 20px;
            font-weight: 900;
        }

        .wish-popup p {
            font-size: clamp(1.2rem, 3vw, 2rem);
            color: #fff;
            text-shadow: 0 3px 10px rgba(0,0,0,0.3);
            margin: 15px 0;
            font-weight: 600;
        }

        /* Input */
        .input {
            padding: clamp(15px, 3vw, 20px);
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            border: 3px solid rgba(255,255,255,0.5);
            border-radius: 20px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            color: white;
            text-align: center;
            width: 90%;
            max-width: 400px;
            margin: 20px auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .input::placeholder { color: rgba(255,255,255,0.7); }
        .input:focus { outline: none; border-color: rgba(255,255,255,0.9); }

        /* Result Box */
        .result {
            font-size: clamp(1.5rem, 5vw, 3rem);
            color: #fff;
            font-weight: 900;
            text-shadow: 0 5px 15px rgba(0,0,0,0.5);
            margin: 25px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 15px;
        }

        /* Card */
        .card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 30px;
            padding: clamp(20px, 4vw, 40px);
            margin: 20px auto;
            max-width: 90%;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
        }

        /* Video Container */
        .video-box {
            width: 90%;
            max-width: 700px;
            aspect-ratio: 16/9;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(0,0,0,0.5);
            margin: 20px auto;
        }

        .video-box iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Game Grid */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: clamp(10px, 2vw, 20px);
            max-width: 400px;
            width: 90%;
            margin: 30px auto;
        }

        .game-box {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255,255,255,0.4);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(2rem, 6vw, 4rem);
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .game-box:hover {
            transform: scale(1.05);
            border-color: rgba(255,255,255,0.8);
        }

        .game-box.revealed {
            background: rgba(255,255,255,0.4);
        }

        /* Music Player */
        .music-player {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .music-btn {
            width: clamp(70px, 12vw, 100px);
            height: clamp(70px, 12vw, 100px);
            border-radius: 50%;
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255,255,255,0.5);
            color: white;
            font-size: clamp(2rem, 5vw, 3rem);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .music-btn:hover {
            transform: scale(1.1);
            border-color: rgba(255,255,255,0.8);
        }

        /* Gift Box */
        .gift {
            font-size: clamp(8rem, 20vw, 15rem);
            cursor: pointer;
            display: inline-block;
            transition: transform 0.3s;
            filter: drop-shadow(0 15px 40px rgba(0,0,0,0.4));
            animation: shake 2s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            10%, 30%, 50%, 70%, 90% { transform: rotate(-5deg); }
            20%, 40%, 60%, 80% { transform: rotate(5deg); }
        }

        /* Progress Bar */
        .progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 5px;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 2px 10px rgba(255,255,255,0.5);
            z-index: 1000;
            transition: width 0.5s;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            color: white;
            padding: clamp(15px, 3vw, 20px) clamp(30px, 5vw, 40px);
            border-radius: 50px;
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 1001;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            max-width: 90%;
            text-align: center;
        }

        .notification.show {
            opacity: 1;
        }

        /* Mobile Responsive for Candles */
        @media (max-width: 600px) {
            .candles-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }
            
            .candle {
                height: 100px;
            }
        }

        @media (min-width: 601px) and (max-width: 900px) {
            .candles-grid {
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress" id="progressBar"></div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Wish Popup -->
    <div class="wish-popup" id="wishPopup">
        <h2>ğŸ‰ WISH PURI HOGI! ğŸ‚</h2>
        <p>Teri saari khwaishein puri hon <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>!</p>
        <p>ğŸŒŸ Khush reh hamesha! ğŸŒŸ</p>
        <p>ğŸ’– Happy Birthday! ğŸ’–</p>
    </div>

    <!-- Screen 1: Welcome -->
    <div class="screen active" id="screen1">
        <div class="emoji">ğŸ‚</div>
        <h1 class="title">HAPPY BIRTHDAY<br><span class="name-highlight">Chirag àª²à«€àªŸà«€!</span></h1>
        <p class="subtitle">Tere liye ek special surprise journey! ğŸ‰</p>
        <button class="btn" onclick="nextScreen(2)">
            <span style="position: relative; z-index: 2;">SHURU KARO! ğŸš€</span>
        </button>
    </div>

    <!-- Screen 2: Intro -->
    <div class="screen" id="screen2">
        <h1 class="title">HEY <span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span>! ğŸŠ</h1>
        <div class="card">
            <p class="text">Aaj tera special din hai <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>! ğŸˆ</p>
            <p class="text">Maine tere liye ek poora experience banaya hai! ğŸ</p>
            <p class="text">Har screen pe kuch naya aur mazedaar hai! ğŸ˜„</p>
            <p class="text">Ready ho ja <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>... ye journey awesome hone wali hai! ğŸ”¥</p>
        </div>
        <button class="btn" onclick="nextScreen(3)">
            <span style="position: relative; z-index: 2;">READY HU! â¡ï¸</span>
        </button>
    </div>

    <!-- Screen 3: Countdown -->
    <div class="screen" id="screen3">
        <h1 class="title">COUNTDOWN START<br><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span>! â°</h1>
        <div class="countdown" id="countdownNumber">3</div>
        <p class="subtitle">Tayar reh... kuch dhamakedar aane wala hai! ğŸ†</p>
    </div>

    <!-- Screen 4: Blow Candles -->
    <div class="screen" id="screen4">
        <h1 class="title"><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span><br>MOMBATTI PHUK! ğŸ•¯ï¸</h1>
        <div class="emoji">ğŸ‚</div>
        <p class="subtitle" id="candleMsg">Sabhi 6 mombattiyon pe click karke phuk!</p>
        <div class="candles-wrapper">
            <div class="candles-grid" id="candlesContainer"></div>
        </div>
    </div>

    <!-- Remaining screens same as before... -->
    <!-- Screen 5: Age Quiz -->
    <div class="screen" id="screen5">
        <h1 class="title"><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span><br>KITNA BUDHA? ğŸ˜‚</h1>
        <p class="subtitle">Apna birth year bata de! ğŸ‘‡</p>
        <input type="number" class="input" id="birthYear" placeholder="Jaise: 1998">
        <button class="btn" onclick="calculateAge()">
            <span style="position: relative; z-index: 2;">CALCULATE KAR! ğŸ“Š</span>
        </button>
        <div class="result" id="ageResult"></div>
    </div>

    <!-- Screen 6: Music -->
    <div class="screen" id="screen6">
        <h1 class="title"><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span><br>DJ TIME! ğŸµ</h1>
        <div class="emoji" onclick="toggleMusic()">ğŸ§</div>
        <p class="subtitle">Birthday beats chala de! ğŸ¶</p>
        <div class="music-player">
            <button class="music-btn" onclick="toggleMusic()">
                <i class="fas fa-play" id="musicIcon"></i>
            </button>
        </div>
        <audio id="bgMusic" loop>
            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        </audio>
        <button class="btn" onclick="nextScreen(7)" style="margin-top: 30px;">
            <span style="position: relative; z-index: 2;">NEXT! ğŸ®</span>
        </button>
    </div>

    <!-- Screen 7: Memory Game -->
    <div class="screen" id="screen7">
        <h1 class="title"><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span><br>MEMORY GAME! ğŸ®</h1>
        <p class="subtitle" id="gameMsg">Emoji dhundo aur match karo! ğŸ§©</p>
        <div class="game-grid" id="gameGrid"></div>
    </div>

    <!-- Screen 8: Gift -->
    <div class="screen" id="screen8">
        <h1 class="title"><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span><br>SURPRISE GIFT! ğŸ</h1>
        <p class="subtitle">Gift pe click kar! ğŸ‘‡</p>
        <div class="gift" onclick="openGift()">ğŸ</div>
    </div>

    <!-- Screen 9: Video -->
    <div class="screen" id="screen9">
        <h1 class="title"><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span><br>SPECIAL VIDEO! ğŸ¬</h1>
        <p class="subtitle">Dekh kya hai special! ğŸ˜‚</p>
        <div class="video-box">
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1" allowfullscreen></iframe>
        </div>
        <p class="text" style="margin-top: 20px;">ğŸ˜‚ RICK ROLLED! Birthday prank complete! ğŸ‰</p>
        <button class="btn" onclick="nextScreen(10)">
            <span style="position: relative; z-index: 2;">FINAL SURPRISE! ğŸ’–</span>
        </button>
    </div>

    <!-- Screen 10: Final Message -->
    <div class="screen" id="screen10">
        <h1 class="title">ğŸ’– DIL SE<br><span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span>! ğŸ’–</h1>
        <div class="card">
            <p class="text">Mazak to bahut ho gaya <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>... ğŸ˜„</p>
            <p class="text">Ab sachchi baat... â¤ï¸</p>
            <p class="text">Tu mere liye bahut special hai! ğŸˆ</p>
            <p class="text">Zindagi me sabkuch best mile tujhe <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>! â­</p>
            <p class="text">Health, wealth aur khushiyaan! ğŸŠ</p>
            <p class="text">Aur haan <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>... PARTY TU DE RAHA HAI! ğŸ•ğŸ°</p>
            <p class="text" style="font-size: clamp(1.5rem, 5vw, 2.5rem); margin-top: 30px;">
                <strong>ğŸ‰ HAPPY BIRTHDAY <span class="name-highlight">CHIRAG àª²à«€àªŸà«€</span>! ğŸ‚</strong>
            </p>
        </div>
        <button class="btn" onclick="restartExperience()">
            <span style="position: relative; z-index: 2;">PHIR SE DEKHU! ğŸ”„</span>
        </button>
    </div>

    <script>
        let currentScreen = 1;
        const totalScreens = 10;
        let musicPlaying = false;
        let candlesBlown = 0;
        const totalCandles = 6;
        
        const gameEmojis = ['ğŸ‚', 'ğŸ', 'ğŸˆ', 'ğŸ‰', 'ğŸŠ', 'ğŸ€'];
        let gameCards = [...gameEmojis, ...gameEmojis];
        let flippedCards = [];
        let matchedPairs = 0;

        function updateProgress() {
            const progress = (currentScreen / totalScreens) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function nextScreen(screenNum) {
            const current = document.getElementById(`screen${currentScreen}`);
            const next = document.getElementById(`screen${screenNum}`);
            
            gsap.to(current, {
                opacity: 0,
                scale: 0.8,
                duration: 0.5,
                onComplete: () => {
                    current.classList.remove('active');
                    next.classList.add('active');
                    gsap.from(next, {
                        opacity: 0,
                        scale: 1.2,
                        duration: 0.5
                    });
                    
                    currentScreen = screenNum;
                    updateProgress();
                    
                    if(screenNum === 3) startCountdown();
                    if(screenNum === 4) initCandles();
                    if(screenNum === 7) initGame();
                    
                    confetti({
                        particleCount: 50,
                        spread: 70,
                        origin: { y: 0.6 }
                    });
                }
            });
        }

        function startCountdown() {
            let count = 3;
            const countdownEl = document.getElementById('countdownNumber');
            
            const interval = setInterval(() => {
                count--;
                if(count > 0) {
                    countdownEl.textContent = count;
                    confetti({
                        particleCount: 30,
                        spread: 60,
                        origin: { y: 0.7 }
                    });
                } else {
                    clearInterval(interval);
                    countdownEl.textContent = 'GO! ğŸ‰';
                    megaConfetti();
                    setTimeout(() => nextScreen(4), 2000);
                }
            }, 1000);
        }

        function initCandles() {
            const container = document.getElementById('candlesContainer');
            container.innerHTML = '';
            candlesBlown = 0;
            
            for(let i = 0; i < totalCandles; i++) {
                const candle = document.createElement('div');
                candle.className = 'candle';
                candle.innerHTML = '<div class="flame"></div><div class="smoke"></div>';
                candle.onclick = () => blowCandle(candle);
                container.appendChild(candle);
                
                gsap.from(candle, {
                    y: 100,
                    opacity: 0,
                    duration: 0.5,
                    delay: i * 0.1,
                    ease: "bounce.out"
                });
            }
        }

        function blowCandle(candle) {
            if(!candle.classList.contains('blown')) {
                candle.classList.add('blown');
                candlesBlown++;
                
                gsap.to(candle, {
                    scale: 0.95,
                    duration: 0.2,
                    yoyo: true,
                    repeat: 1
                });
                
                confetti({
                    particleCount: 20,
                    spread: 50,
                    origin: { y: 0.7 }
                });
                
                if(candlesBlown === totalCandles) {
                    setTimeout(() => {
                        document.getElementById('candleMsg').innerHTML = 
                            'ğŸ‰ Perfect <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>! ğŸ‚';
                        
                        showWishPopup();
                        megaConfetti();
                        celebrationFireworks();
                        showNotification('ğŸ‰ Chirag àª²à«€àªŸà«€ ne sab mombatti phuk di! ğŸ‚');
                        
                        setTimeout(() => nextScreen(5), 4500);
                    }, 500);
                } else {
                    document.getElementById('candleMsg').textContent = 
                        `${totalCandles - candlesBlown} mombatti baki hai Chirag àª²à«€àªŸà«€! ğŸ•¯ï¸`;
                }
            }
        }

        function showWishPopup() {
            const popup = document.getElementById('wishPopup');
            popup.classList.add('show');
            
            setTimeout(() => {
                gsap.to(popup, {
                    scale: 0,
                    rotation: 180,
                    opacity: 0,
                    duration: 0.6,
                    onComplete: () => {
                        popup.classList.remove('show');
                        popup.style.transform = 'translate(-50%, -50%) scale(0)';
                        popup.style.opacity = '1';
                    }
                });
            }, 3500);
        }

        function celebrationFireworks() {
            const duration = 3000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 999 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
                }));
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
                }));
            }, 250);
        }

        function calculateAge() {
            const birthYear = document.getElementById('birthYear').value;
            const currentYear = new Date().getFullYear();
            const age = currentYear - birthYear;
            const resultDiv = document.getElementById('ageResult');
            
            if (!birthYear) {
                resultDiv.innerHTML = 'ğŸ˜… Year daal pehle Chirag àª²à«€àªŸà«€!';
                return;
            }
            
            let message = '';
            if (age < 0) {
                message = 'ğŸ¤” Time traveler hai kya Chirag àª²à«€àªŸà«€?';
            } else if (age < 13) {
                message = `ğŸ‘¶ ${age} saal! Bachcha hai Chirag àª²à«€àªŸà«€!`;
            } else if (age < 18) {
                message = `ğŸ® ${age} saal! Teen power Chirag àª²à«€àªŸà«€! ğŸ”¥`;
            } else if (age < 25) {
                message = `ğŸ‰ ${age} saal! Prime time Chirag àª²à«€àªŸà«€! ğŸ’ª`;
            } else if (age < 35) {
                message = `ğŸ˜ ${age} saal! Experienced Chirag àª²à«€àªŸà«€! ğŸ‘”`;
            } else {
                message = `ğŸ‚ ${age} saal! Legend Chirag àª²à«€àªŸà«€! ğŸ‘‘`;
            }
            
            resultDiv.innerHTML = message;
            gsap.from(resultDiv, {
                scale: 0,
                rotation: 360,
                duration: 0.8,
                ease: "back.out"
            });
            
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
            
            showNotification('ğŸŠ Perfect Chirag àª²à«€àªŸà«€! Next level pe chalte hain! ğŸš€');
            setTimeout(() => nextScreen(6), 3000);
        }

        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            const icon = document.getElementById('musicIcon');
            
            if(musicPlaying) {
                music.pause();
                icon.className = 'fas fa-play';
                musicPlaying = false;
                showNotification('â¸ï¸ Music paused Chirag àª²à«€àªŸà«€!');
            } else {
                music.play();
                icon.className = 'fas fa-pause';
                musicPlaying = true;
                showNotification('ğŸµ Party music playing Chirag àª²à«€àªŸà«€! ğŸ¶');
                confetti({
                    particleCount: 50,
                    spread: 60,
                    origin: { y: 0.7 }
                });
            }
        }

        function initGame() {
            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            matchedPairs = 0;
            flippedCards = [];
            
            gameCards.sort(() => Math.random() - 0.5);
            
            gameCards.forEach((emoji, index) => {
                const box = document.createElement('div');
                box.className = 'game-box';
                box.innerHTML = 'â“';
                box.dataset.emoji = emoji;
                box.dataset.index = index;
                box.onclick = () => flipCard(box);
                grid.appendChild(box);
                
                gsap.from(box, {
                    scale: 0,
                    rotation: 360,
                    duration: 0.5,
                    delay: index * 0.05,
                    ease: "back.out"
                });
            });
        }

        function flipCard(box) {
            if(flippedCards.length < 2 && !box.classList.contains('revealed')) {
                box.innerHTML = box.dataset.emoji;
                box.classList.add('revealed');
                flippedCards.push(box);
                
                gsap.to(box, {
                    rotateY: 360,
                    duration: 0.5
                });
                
                if(flippedCards.length === 2) {
                    setTimeout(checkMatch, 800);
                }
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if(card1.dataset.emoji === card2.dataset.emoji) {
                matchedPairs++;
                confetti({
                    particleCount: 30,
                    spread: 50,
                    origin: { y: 0.7 }
                });
                
                if(matchedPairs === gameEmojis.length) {
                    setTimeout(() => {
                        document.getElementById('gameMsg').innerHTML = 
                            'ğŸ‰ Genius <span class="name-highlight">Chirag àª²à«€àªŸà«€</span>! Sab match kar liye! ğŸ†';
                        megaConfetti();
                        showNotification('ğŸ† Chirag àª²à«€àªŸà«€ champion hai! ğŸ®');
                        setTimeout(() => nextScreen(8), 2500);
                    }, 500);
                }
            } else {
                card1.innerHTML = 'â“';
                card2.innerHTML = 'â“';
                card1.classList.remove('revealed');
                card2.classList.remove('revealed');
            }
            
            flippedCards = [];
        }

        function openGift() {
            showNotification('ğŸ Gift khul raha hai Chirag àª²à«€àªŸà«€! ğŸ‰');
            gsap.to('.gift', {
                scale: 2,
                rotation: 720,
                opacity: 0,
                duration: 1,
                ease: "power2.in",
                onComplete: () => {
                    megaConfetti();
                    setTimeout(() => nextScreen(9), 1000);
                }
            });
        }

        function restartExperience() {
            currentScreen = 1;
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('screen1').classList.add('active');
            updateProgress();
            megaConfetti();
            showNotification('ğŸ”„ Phir se shuru karte hain Chirag àª²à«€àªŸà«€! ğŸ‰');
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.innerHTML = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function megaConfetti() {
            const count = 200;
            const defaults = { origin: { y: 0.7 } };

            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, {
                    particleCount: Math.floor(count * particleRatio)
                }));
            }

            fire(0.25, { spread: 26, startVelocity: 55 });
            fire(0.2, { spread: 60 });
            fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
            fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
            fire(0.1, { spread: 120, startVelocity: 45 });
        }

        updateProgress();
    </script>
</body>
</html>
